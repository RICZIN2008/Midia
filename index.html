<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galeria de M√≠dia</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        h1 { color: #333; }
        .menu { margin-bottom: 20px; }
        .menu button { padding: 10px 15px; margin: 5px; cursor: pointer; font-size: 16px; }
        .gallery { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; }
        .gallery-item { text-align: center; }
        .gallery-item img, .gallery-item video, .gallery-item audio { width: 300px; height: auto; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.2); }
        .hidden { display: none; }
    </style>
</head>
<body>

    <h1>üìÇ Selecione uma Op√ß√£o</h1>

    <div class="menu">
        <button onclick="setMediaType('image')">üì∏ Foto</button>
        <button onclick="setMediaType('video')">üé• V√≠deo</button>
        <button onclick="setMediaType('gif')">üñºÔ∏è GIF</button>
        <button onclick="setMediaType('audio')">üé∂ √Åudio</button>
        <button onclick="setMediaType('playlist')">üì∫ Playlist</button>
    </div>

    <div class="upload-container">
        <input type="text" id="titleInput" placeholder="Digite um t√≠tulo..." required>
        <input type="file" id="fileInput" accept="image/*,video/*,audio/*">
        <button onclick="addMedia()">Adicionar M√≠dia</button>
    </div>

    <h2>üìå Galeria</h2>
    <div class="gallery" id="gallery"></div>

    <h2>üéûÔ∏è Playlist</h2>
    <div class="gallery" id="playlist">
        <button class="hidden" id="playAllButton" onclick="playPlaylist()">‚ñ∂Ô∏è Reproduzir Playlist</button>
    </div>

    <script>
        let selectedType = "image";

        function setMediaType(type) {
            selectedType = type;
            document.getElementById("fileInput").value = "";
            document.getElementById("titleInput").value = "";
        }

        function addMedia() {
            const fileInput = document.getElementById('fileInput');
            const titleInput = document.getElementById('titleInput');

            if (!titleInput.value.trim()) {
                alert("Por favor, insira um t√≠tulo antes de adicionar.");
                return;
            }

            if (fileInput.files.length === 0) {
                alert("Selecione um arquivo para adicionar!");
                return;
            }

            const file = fileInput.files[0];
            const reader = new FileReader();

            reader.onload = function(event) {
                const url = event.target.result;
                const mediaData = {
                    title: titleInput.value,
                    url: url,
                    type: selectedType
                };

                saveMedia(mediaData);
                renderMedia();
            };

            reader.readAsDataURL(file);
        }

        function saveMedia(mediaData) {
            let mediaList = JSON.parse(localStorage.getItem("mediaList")) || [];
            mediaList.push(mediaData);
            localStorage.setItem("mediaList", JSON.stringify(mediaList));
        }

        function renderMedia() {
            const gallery = document.getElementById("gallery");
            const playlist = document.getElementById("playlist");
            const playAllButton = document.getElementById("playAllButton");

            gallery.innerHTML = "";
            playlist.innerHTML = '<button class="hidden" id="playAllButton" onclick="playPlaylist()">‚ñ∂Ô∏è Reproduzir Playlist</button>';

            const mediaList = JSON.parse(localStorage.getItem("mediaList")) || [];

            mediaList.forEach((media) => {
                const container = document.createElement("div");
                container.classList.add("gallery-item");

                const title = document.createElement("h3");
                title.textContent = media.title;

                const link = document.createElement("a");
                link.href = media.url;
                link.target = "_blank";

                let mediaElement;
                if (media.type === "image" || media.type === "gif") {
                    mediaElement = document.createElement("img");
                    mediaElement.src = media.url;
                } else if (media.type === "video") {
                    mediaElement = document.createElement("video");
                    mediaElement.src = media.url;
                    mediaElement.controls = true;
                } else if (media.type === "audio") {
                    mediaElement = document.createElement("audio");
                    mediaElement.src = media.url;
                    mediaElement.controls = true;
                } else if (media.type === "playlist") {
                    mediaElement = document.createElement("video");
                    mediaElement.src = media.url;
                    mediaElement.controls = true;
                }

                link.appendChild(mediaElement);
                container.appendChild(title);
                container.appendChild(link);

                if (media.type === "playlist") {
                    playlist.appendChild(container);
                    playAllButton.classList.remove("hidden");
                } else {
                    gallery.appendChild(container);
                }
            });
        }

        function playPlaylist() {
            const videos = document.querySelectorAll("#playlist video");
            let index = 0;

            function playNext() {
                if (index < videos.length) {
                    videos[index].play();
                    videos[index].onended = () => {
                        index++;
                        playNext();
                    };
                }
            }

            playNext();
        }

        document.addEventListener("DOMContentLoaded", renderMedia);
    </script>

</body>
</html>
